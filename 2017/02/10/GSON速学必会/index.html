<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>GSON速学必会 | 当代十八线浪漫主义码农诗人</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="一. GSON 简介GSON是一个Java语言编写的用于处理JSON数据格式的开源应用程序编程接口项目。它将Java对象转换为JSON表示。还可以用于将JSON字符串转换为等效的Java对象。">
<meta property="og:type" content="article">
<meta property="og:title" content="GSON速学必会">
<meta property="og:url" content="http://example.com/2017/02/10/GSON%E9%80%9F%E5%AD%A6%E5%BF%85%E4%BC%9A/index.html">
<meta property="og:site_name" content="当代十八线浪漫主义码农诗人">
<meta property="og:description" content="一. GSON 简介GSON是一个Java语言编写的用于处理JSON数据格式的开源应用程序编程接口项目。它将Java对象转换为JSON表示。还可以用于将JSON字符串转换为等效的Java对象。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://r2cex8oik.hn-bkt.clouddn.com/1.png">
<meta property="og:image" content="http://r2cex8oik.hn-bkt.clouddn.com/2.png">
<meta property="og:image" content="http://r2cex8oik.hn-bkt.clouddn.com/3.png">
<meta property="og:image" content="http://r2cex8oik.hn-bkt.clouddn.com/4.png">
<meta property="og:image" content="http://r2cex8oik.hn-bkt.clouddn.com/5.png">
<meta property="article:published_time" content="2017-02-10T10:53:59.000Z">
<meta property="article:modified_time" content="2021-11-10T11:20:26.068Z">
<meta property="article:author" content="公众号：书香颜 | 微信号: phideonvw">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="JSON">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://r2cex8oik.hn-bkt.clouddn.com/1.png">
  
    <link rel="alternate" href="/atom.xml" title="当代十八线浪漫主义码农诗人" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">当代十八线浪漫主义码农诗人</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-GSON速学必会" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/02/10/GSON%E9%80%9F%E5%AD%A6%E5%BF%85%E4%BC%9A/" class="article-date">
  <time datetime="2017-02-10T10:53:59.000Z" itemprop="datePublished">2017-02-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      GSON速学必会
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="一-GSON-简介"><a href="#一-GSON-简介" class="headerlink" title="一. GSON 简介"></a>一. GSON 简介</h1><p>GSON是一个Java语言编写的用于处理JSON数据格式的开源应用程序编程接口项目。它将Java对象转换为JSON表示。还可以用于将JSON字符串转换为等效的Java对象。</p>
<span id="more"></span>

<p><img src="http://r2cex8oik.hn-bkt.clouddn.com/1.png"></p>
<p><code>gson</code>包包含了JSON数据处理的所有常见类和接口。<code>gson</code>内部的子包<code>reflect</code>, <code>annotation</code>, 和 <code>stream</code>。<code>reflect</code>包包含处理Java泛型类型信息的类和接口。<code>annotation</code>包包含相关的类和接口，用于对象属性的自定义名称映射。<code>stream</code>包包含与读写相关的类和接口。</p>
<p>GSON设计的初衷如下:</p>
<ul>
<li>有一个简单的转换机制，可以将Java对象转换为JSON。GSON Java项目有大量的实用方法作为api供开发人员使用。</li>
<li>允许将先前存在的不可修改的Java对象转换为JSON和从JSON转换。</li>
<li>定制对象的表示。GSON为对象字段提供了名称的自定义映射，同时将其序列化为JSON字符串。</li>
<li>提供一个紧凑和格式化的输出。默认情况下，为Java对象生成的JSON字符串是紧凑的形式。GSON提供漂亮的打印设备以使其以人类可读的格式。</li>
</ul>
<h2 id="1-在-GSON-中创建你的第一个-JSON"><a href="#1-在-GSON-中创建你的第一个-JSON" class="headerlink" title="1. 在 GSON 中创建你的第一个 JSON"></a>1. 在 GSON 中创建你的第一个 JSON</h2><p>在本节中，将学习实例化GSON及其各种方法的含义，然后是一个快速示例代码，展示包装类型Java对象的基本序列化。</p>
<p>###步骤1 - 实例化GSON<br>要使用GSON库，Gson类需要实例化一个<code>com .google.GSON</code>的对象。GSON对象不维护任何状态，这个特性有助于在多个地方重用GSON对象。</p>
<p>GSON库提供了实例化的两种方法:</p>
<ul>
<li>默认方法</li>
<li>构造器使用设置方法</li>
</ul>
<p>####默认方法<br>在这种方法中，可以使用<code>new</code>关键字实例化<code>GSON</code>类对象。这种方法创建了一个没有设置的<code>object</code>实例。</p>
<p>####构造器使用设置方法<br>在这种方法中，可以使用<code>GsonBuilder</code>类和<code>create</code>方法创建一个GSON类对象:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Gson gson = <span class="keyword">new</span> GsonBuilder ().create ();</span><br></pre></td></tr></table></figure>

<p>前面的代码调用了<code>GsonBuilder</code>的<code>create</code>方法，它返回一个<code>Gson</code>对象进行初始化。</p>
<p>下表列举了<code>GSON</code>公共的一些方法：</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>fromJson</td>
<td>此方法用于反序列化以获取Java对象。 API中有此方法的重载的形式。</td>
</tr>
<tr>
<td>toJson</td>
<td>该方法将Java对象序列化为等效的JSON表示形式。 API中有此方法的重载的形式。</td>
</tr>
<tr>
<td>toJsonTree</td>
<td>该方法使用它们的泛型类型序列化对象。API中有此方法的重载的形式。</td>
</tr>
</tbody></table>
<h4 id="2-一个简单的例子"><a href="#2-一个简单的例子" class="headerlink" title="2. 一个简单的例子"></a>2. 一个简单的例子</h4><p>让我们看看一个简单的例子代码，展示的基本使用GSON库对Java包装类进行序列化/反序列化对象的JSON字符串:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickStartDemo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*Java Wrapper Type*/</span></span><br><span class="line">        String jsonInteger = gson.toJson(<span class="keyword">new</span> Integer(<span class="number">1</span>));</span><br><span class="line">        String jsonDouble = gson.toJson(<span class="keyword">new</span> Double(<span class="number">12345.5432</span>));</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;GSON toJson Method Use &quot;</span>);</span><br><span class="line">        System.out.println(jsonInteger);</span><br><span class="line">        System.out.println(jsonDouble);</span><br><span class="line"></span><br><span class="line">        Integer javaInteger = gson.fromJson(jsonInteger, Integer.class);</span><br><span class="line">        Double javaDouble = gson.fromJson(jsonDouble, Double.class);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;GSON fromJson Method Use &quot;</span>);</span><br><span class="line">        System.out.println(javaInteger);</span><br><span class="line">        System.out.println(javaDouble);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">GSON toJson Method Use</span><br><span class="line">1</span><br><span class="line">12345.5432</span><br><span class="line">GSON fromJson Method Use</span><br><span class="line">1</span><br><span class="line">12345.5432</span><br></pre></td></tr></table></figure>

<p>前面的代码演示了<code>toJson</code>和<code>fromJson</code>的两种方法的快速使用。</p>
<p>在代码的第一部分中，使用默认方法实例化了一个<code>Gson</code>类对象，并使用值<code>1</code>和<code>12345.5432</code>实例化了两个Java 包装类对象，即<code>Integer</code>类和<code>Double</code>类。这些对象传递给<code>toJson</code>方法，该方法生成JSON等效字符串形式。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>详细说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>toJSON</code></td>
<td>参数：使用Java类对象进行序列化。  返回：JSON对象的字符串表示形式</td>
</tr>
<tr>
<td><code>fromJSON</code></td>
<td>参数：第一个参数是JSON表示的字符串类型，第二个参数是预期的Java类类型。返回：预期的Java类对象</td>
</tr>
</tbody></table>
<p>在代码的最后一部分中，JSON等效字符串传递给<code>fromJson</code>方法。 该方法有两个参数，第一个参数是一个字符串，第二个参数是一个预期的Java类类型。 <code>fromJson</code>方法的返回类型始终是Java类型。</p>
<h1 id="二-需要知道的12个GSON特性"><a href="#二-需要知道的12个GSON特性" class="headerlink" title="二. 需要知道的12个GSON特性"></a>二. 需要知道的12个GSON特性</h1><p>在本节中，将了解GSON库支持的主要功能以及如何实现这些功能。</p>
<h2 id="1-对-Java-对象的支持"><a href="#1-对-Java-对象的支持" class="headerlink" title="1. 对 Java 对象的支持"></a>1. 对 Java 对象的支持</h2><p>GSON中的对象被称为<code>JsonElement</code>的类型：</p>
<p><img src="http://r2cex8oik.hn-bkt.clouddn.com/2.png"></p>
<p>GSON库可以将任何用户定义的类对象转换为JSON表示。<code>Student</code>类是一个用户定义的类，GSON可以将任何<code>Student</code>对象序列化为JSON。<br>以下是 <code>Student.java</code> 的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.lee.jsondemo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String subject;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> mark;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSubject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> subject;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSubject</span><span class="params">(String subject)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMark</span><span class="params">(<span class="keyword">int</span> mark)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mark = mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对<code>Student</code>类进行操作的<code>JavaObjectFeaturesUse.java</code>代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line">importcom.packt.chapter.vo.Student;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaObjectFeaturesUse</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">Gsongson = <span class="keyword">new</span> Gson();</span><br><span class="line"></span><br><span class="line">Student aStudent = <span class="keyword">new</span> Student();</span><br><span class="line">aStudent.setName(<span class="string">&quot;Sandeep&quot;</span>);</span><br><span class="line">aStudent.setMark(<span class="number">128</span>);</span><br><span class="line">aStudent.setSubject(<span class="string">&quot;Computer Science&quot;</span>);</span><br><span class="line"></span><br><span class="line">String studentJson = gson.toJson(aStudent);</span><br><span class="line">System.out.println(studentJson);</span><br><span class="line"></span><br><span class="line">Student anotherStudent = gson.fromJson(studentJson, Student.class);</span><br><span class="line">System.out.println(anotherStudentinstanceof  Student);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>执行结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;name&quot;:&quot;Sandeep&quot;,&quot;subject&quot;:&quot;Computer Science&quot;,&quot;mark&quot;:128&#125;</span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<p>上面的代码创建了一个<code>name</code>属性为<code>sandeep</code>的学生对象，<code>subject</code>属性设置为<code>Computer Scienc</code>，<code>mark</code>为<code>128</code>。然后将一个<code>Gson</code>对象实例化，并将学生对象作为一个参数传递给<code>toJson()</code>方法。它返回一个字符串，该字符串具有Java对象的JSON表示。该字符串作为控制台中的第一行打印。学生对象的输出JSON表示是键/值对的集合。学生类的Java属性成为JSON字符串中的键。</p>
<p>在代码的最后一部分中，<code>fromJson()</code>方法将JSON生成的字符串作为第一个输入参数，<code>Student.class</code>作为第二个参数，将JSON字符串转换回Java对象。代码的最后一行使用<code>Student</code>作为第二行操作符的实例来验证由<code>fromJson()</code>方法生成的Java对象是否是<code>Student</code>类型的。在控制台中，它输出<code>true</code>，则表示我们将得到与JSON相同的值。</p>
<h2 id="2-序列化与反序列化"><a href="#2-序列化与反序列化" class="headerlink" title="2. 序列化与反序列化"></a>2. 序列化与反序列化</h2><p>GSON有一些类的隐式序列化，比如Java包装类(<code>Integer </code>、<code>Long</code>、<code>Double</code>等等)、<code>Java.net.url</code>、<code>java.net.URI</code>、<code>java.util.Date</code>，等等。</p>
<p>让我看个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InbuiltSerializerFeature</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Date aDateJson = <span class="keyword">new</span> Date();</span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">        String jsonDate = gson.toJson(aDateJson);</span><br><span class="line">        System.out.println(jsonDate);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Sep 15, 2017 10:38:35 PM&quot;</span><br></pre></td></tr></table></figure>

<p>前面的代码是将Java的<code>Date</code>类对象序列化为JSON表示。在前面的部分中，您已经了解了如何使用GSON来序列化和反序列化对象，以及它如何为用户定义的Java类对象提供定制化的序列化器和反序列化器。让我们看看它是如何工作的。</p>
<p>另外，GSON还为开发人员提供了可定制的序列化的特性。</p>
<p>下面的代码是一个可定制序列化器的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentTypeSerializer</span> <span class="keyword">implements</span> <span class="title">JsonSerializer</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> JsonElement <span class="title">serialize</span><span class="params">(Student student, Type type,</span></span></span><br><span class="line"><span class="params"><span class="function">                                 JsonSerializationContext context)</span> </span>&#123;</span><br><span class="line">        JsonObject obj = <span class="keyword">new</span> JsonObject();</span><br><span class="line"></span><br><span class="line">        obj.addProperty(<span class="string">&quot;studentname&quot;</span>, student.getName());</span><br><span class="line">        obj.addProperty(<span class="string">&quot;subjecttaken&quot;</span>, student.getSubject());</span><br><span class="line">        obj.addProperty(<span class="string">&quot;marksecured&quot;</span>, student.getMark());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下面的代码是一个自定义反序列化器的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentTypeDeserializer</span> <span class="keyword">implements</span> <span class="title">JsonDeserializer</span>&lt;<span class="title">Student</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Student <span class="title">deserialize</span><span class="params">(JsonElement jsonelment, Type type,</span></span></span><br><span class="line"><span class="params"><span class="function">                               JsonDeserializationContext context)</span> <span class="keyword">throws</span> JsonParseException </span>&#123;</span><br><span class="line"></span><br><span class="line">        JsonObject jsonObject = jsonelment.getAsJsonObject();</span><br><span class="line"></span><br><span class="line">        Student aStudent = <span class="keyword">new</span> Student();</span><br><span class="line">        aStudent.setName(jsonObject.get(<span class="string">&quot;studentname&quot;</span>).getAsString());</span><br><span class="line">        aStudent.setSubject(jsonObject.get(<span class="string">&quot;subjecttaken&quot;</span>).getAsString());</span><br><span class="line">        aStudent.setMark(jsonObject.get(<span class="string">&quot;marksecured&quot;</span>).getAsInt());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> aStudent;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以下代码测试自定义序列化器和反序列化器：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomSerializerFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		GsonBuilder gsonBuilder = <span class="keyword">new</span> GsonBuilder();</span><br><span class="line"></span><br><span class="line">		gsonBuilder.registerTypeAdapter(Student.class, <span class="keyword">new</span> StudentTypeSerializer());</span><br><span class="line"></span><br><span class="line">		Gson gson = gsonBuilder.create();</span><br><span class="line"></span><br><span class="line">		Student aStudent = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line">		aStudent.setName(<span class="string">&quot;Sandeep&quot;</span>);</span><br><span class="line"></span><br><span class="line">		aStudent.setMark(<span class="number">150</span>);</span><br><span class="line"></span><br><span class="line">		aStudent.setSubject(<span class="string">&quot;Arithmetic&quot;</span>);</span><br><span class="line"></span><br><span class="line">		String studentJson = gson.toJson(aStudent);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;Custom Serializer : Json String Representation &quot;</span>);</span><br><span class="line">		System.out.println(studentJson);</span><br><span class="line"></span><br><span class="line">		gsonBuilder.registerTypeAdapter(Student.class, <span class="keyword">new</span> StudentTypeDeserializer());</span><br><span class="line">		Gson gsonde = gsonBuilder.create();</span><br><span class="line">		Student deStudent = gsonde.fromJson(studentJson, Student.class);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;Custom DeSerializer : Java Object Creation&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;Student Name &quot;</span> + deStudent.getName());</span><br><span class="line">		System.out.println(<span class="string">&quot;Student Mark &quot;</span> + deStudent.getMark());</span><br><span class="line">		System.out.println(<span class="string">&quot;Student Subject &quot;</span> + deStudent.getSubject());</span><br><span class="line">		System.out.println(<span class="string">&quot;is anotherStudent is type of Student &quot;</span> + (deStudent <span class="keyword">instanceof</span> Student));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Custom Serializer : Json String Representation </span><br><span class="line">&#123;&quot;studentname&quot;:&quot;Sandeep&quot;,&quot;subjecttaken&quot;:&quot;Arithmetic&quot;,&quot;marksecured&quot;:150&#125;</span><br><span class="line">Custom DeSerializer : Java Object Creation</span><br><span class="line">Student Name Sandeep</span><br><span class="line">Student Mark 150</span><br><span class="line">Student Subject Arithmetic</span><br><span class="line">is anotherStudent is type of Student true</span><br></pre></td></tr></table></figure>

<h2 id="3-漂亮的打印"><a href="#3-漂亮的打印" class="headerlink" title="3. 漂亮的打印"></a>3. 漂亮的打印</h2><p>GSON的序列化输出的JSON表示格式紧凑。如果有大量的Java对象集合，并且每个对象都有许多序列化的属性，那么它们紧凑的JSON表示的可读性是非常差的，而且看起来很难看。</p>
<p>为了解决这个问题，<code>GsonBuilder</code>支持漂亮的打印配置，同时为序列化使用创建一个<code>Gson</code>对象。这个漂亮的打印功能通过适当的标签缩进和新的换行来美化JSON字符串的输出。</p>
<p>以下是关于格式化程序的一些重要内容：</p>
<ul>
<li><code>JsonPrintFormatter</code>和<code>JsonCompactFormatter</code>是GSON中的两种格式化类型的表示。</li>
<li><code>JsonCompactFormatter</code>是GSON的默认格式化程序。</li>
<li><code>JsonPrintFormatter</code>用于漂亮的打印，它不会暴露在API中。所以开发者不能修改。</li>
<li><code>JsonPrintFormatter</code>支持一个默认行长度为80个字符，两个字符缩进，以及右侧保持四个字符。</li>
<li>可以通过调用<code>GsonBuilder</code>的<code>setPrettyPrinting()</code>方法来使用<code>JsonPrintFormatter</code>。</li>
</ul>
<p>具体看一个例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"><span class="keyword">import</span> com.packt.chapter.vo.Student;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrettyPrintFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    Gson gson = <span class="keyword">new</span> GsonBuilder().setPrettyPrinting().create();</span><br><span class="line">    List&lt;Student&gt; listOfStudent = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</span><br><span class="line"></span><br><span class="line">    Student student1 = <span class="keyword">new</span> Student();</span><br><span class="line">    student1.setName(<span class="string">&quot;Sandeep Kumar Patel&quot;</span>);</span><br><span class="line">    student1.setSubject(<span class="string">&quot;Arithmetic&quot;</span>);</span><br><span class="line">    student1.setMark(<span class="number">234</span>);</span><br><span class="line"></span><br><span class="line">    Student student2 = <span class="keyword">new</span> Student();</span><br><span class="line">    student2.setName(<span class="string">&quot;Sangeeta Patel&quot;</span>);</span><br><span class="line">    student2.setSubject(<span class="string">&quot;Geography&quot;</span>);</span><br><span class="line">    student2.setMark(<span class="number">214</span>);</span><br><span class="line"></span><br><span class="line">    listOfStudent.add(student1);</span><br><span class="line">    listOfStudent.add(student2);</span><br><span class="line"></span><br><span class="line">    String prettyJsonString = gson.toJson(listOfStudent);</span><br><span class="line">    System.out.println(prettyJsonString);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;Sandeep Kumar Patel&quot;,</span><br><span class="line">    &quot;subject&quot;: &quot;Arithmetic&quot;,</span><br><span class="line">    &quot;mark&quot;: 234</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;Sangeeta Patel&quot;,</span><br><span class="line">    &quot;subject&quot;: &quot;Geography&quot;,</span><br><span class="line">    &quot;mark&quot;: 214</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>上面的代码将学生列表序列化为JSON表示。它使用<code>GsonBuilder</code>类获得一个<code>Gson</code>对象。使用<code>setPrettyPrinting()</code>方法配置漂亮的打印。可以看到以前的代码的输出已经正确地缩进，并且阅读起来很愉快。</p>
<h2 id="4-内部类"><a href="#4-内部类" class="headerlink" title="4. 内部类"></a>4. 内部类</h2><p>Java内部类可以有两种类型:</p>
<ul>
<li>静态内部类</li>
<li>实例内部类</li>
</ul>
<p>下面将看到GSON如何处理这些类型的内部类类对象的。</p>
<h3 id="1-静态内部类"><a href="#1-静态内部类" class="headerlink" title="(1) 静态内部类"></a>(1) 静态内部类</h3><p>GSON可以隐式地序列化/反序列化静态内部类。不需要额外的配置。</p>
<p>让我们看一个静态内部类的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String studentName;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> mark;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getStudentName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> studentName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudentName</span><span class="params">(String studentName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.studentName = studentName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMark</span><span class="params">(<span class="keyword">int</span> mark)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mark = mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> String courseName;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> String duration;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getCourseName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> courseName;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCourseName</span><span class="params">(String courseName)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.courseName = courseName;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getDuration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> duration;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDuration</span><span class="params">(String duration)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.duration = duration;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticNestedClassFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().setPrettyPrinting().create();</span><br><span class="line"></span><br><span class="line">		Student.Course aCourse = <span class="keyword">new</span> Student.Course();</span><br><span class="line">		aCourse.setCourseName(<span class="string">&quot;M.TECH.&quot;</span>);</span><br><span class="line">		aCourse.setDuration(<span class="string">&quot;120 hr&quot;</span>);</span><br><span class="line"></span><br><span class="line">		String jsonCourse = gson.toJson(aCourse);</span><br><span class="line">		System.out.println(jsonCourse);</span><br><span class="line"></span><br><span class="line">		Student.Course anotherCourse = gson.fromJson(jsonCourse, Student.Course.class);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;Course : &quot;</span> + anotherCourse.getCourseName() + <span class="string">&quot;Duration : &quot;</span> + anotherCourse.getDuration());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;courseName&quot;: &quot;M.TECH.&quot;,</span><br><span class="line">  &quot;duration&quot;: &quot;120 hr&quot;</span><br><span class="line">&#125;</span><br><span class="line">Course : M.TECH.Duration : 120 hr</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，<code>Course</code>类是<code>Student</code>类内的静态内部类。<code>courseName</code>和<code>duration</code>是两个属性，以及各自的getter和setter方法在。通过外部类的<code>.</code>操作符调用，可以在Java中实例化一个静态的内部类。<code> Student.Course aCourse = new Student.Course()</code>用来初始化内部<code>Course</code>类的。<code>M.TECH.</code>和<code>120 hr</code>则是用来实例化它的两个值。从输出中可以看出，GSON能够序列化生成<code>Course</code>对象的JSON表示的静态内部类。输出的最后一行显示GSON成功地将其反序列化。</p>
<h3 id="2-实例内部类"><a href="#2-实例内部类" class="headerlink" title="(2) 实例内部类"></a>(2) 实例内部类</h3><p>Java中的一个实例内部类可以通过使用外部类对象来实例化。下面的代码演示了GSON如何序列化和反序列化一个实例内部类的Java类对象：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String studentName;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> mark;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getStudentName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> studentName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStudentName</span><span class="params">(String studentName)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.studentName = studentName;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMark</span><span class="params">(<span class="keyword">int</span> mark)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mark = mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Course</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> String courseName;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">private</span> String duration;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getCourseName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> courseName;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCourseName</span><span class="params">(String courseName)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.courseName = courseName;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getDuration</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> duration;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setDuration</span><span class="params">(String duration)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.duration = duration;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InstanceNestedClassFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().setPrettyPrinting().create();</span><br><span class="line">		Student outstudent = <span class="keyword">new</span> Student();</span><br><span class="line">		Student.Course instanceCourse = outstudent.<span class="function">new <span class="title">Course</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">		instanceCourse.setCourseName(<span class="string">&quot;M.TECH.&quot;</span>);</span><br><span class="line">		instanceCourse.setDuration(<span class="string">&quot;12 hr&quot;</span>);</span><br><span class="line"></span><br><span class="line">		String jsonCourse = gson.toJson(instanceCourse);</span><br><span class="line">		System.out.println(jsonCourse);</span><br><span class="line"></span><br><span class="line">		Student.Course anotherCourse = gson.fromJson(jsonCourse, Student.Course.class);</span><br><span class="line">		System.out.println(<span class="string">&quot;Course : &quot;</span> + anotherCourse.getCourseName() + <span class="string">&quot;Duration : &quot;</span> + anotherCourse.getDuration());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;courseName&quot;: &quot;M.TECH.&quot;,</span><br><span class="line">  &quot;duration&quot;: &quot;12 hr&quot;</span><br><span class="line">&#125;</span><br><span class="line">Course : M.TECH.Duration : 12 hr</span><br></pre></td></tr></table></figure>
<p>在前面的代码中，<code>Course</code>是一个实例内部类，有两个字段和它们的getter和setter方法。<code>Course</code>对象的<code>nstanceccourse</code>是使用外部类对象<code>outstudent</code>实例化的。这个内部类对象被放置到序列化和反序列化中，从而在控制台上产生结果。在反序列化过程中，<code>fromJson()</code>方法使用<code>Student</code>作为第二个参数。当然，它帮助GSON成功地将其反序列化到内部类对象中。</p>
<h2 id="5-数组"><a href="#5-数组" class="headerlink" title="5. 数组"></a>5. 数组</h2><p>GSON支持将Java数组转换为JSON表示。</p>
<p>让我们来看一个数组的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().create();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span>[] numberArray = &#123; <span class="number">121</span>, <span class="number">23</span>, <span class="number">34</span>, <span class="number">44</span>, <span class="number">52</span> &#125;;</span><br><span class="line"></span><br><span class="line">		String[] fruitsArray = &#123; <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;oranges&quot;</span>, <span class="string">&quot;grapes&quot;</span> &#125;;</span><br><span class="line"></span><br><span class="line">		String jsonNumber = gson.toJson(numberArray);</span><br><span class="line">		String jsonString = gson.toJson(fruitsArray);</span><br><span class="line"></span><br><span class="line">		System.out.println(jsonNumber);</span><br><span class="line">		System.out.println(jsonString);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span>[] numCollectionArray = gson.fromJson(jsonNumber, <span class="keyword">int</span>[].class);</span><br><span class="line">		String[] fruitBasketArray = gson.fromJson(jsonString, String[].class);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;Number Array Length &quot;</span> + numCollectionArray.length);</span><br><span class="line">		System.out.println(<span class="string">&quot;Fruit Array Length &quot;</span> + fruitBasketArray.length);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[121,23,34,44,52]</span><br><span class="line">[&quot;apple&quot;,&quot;oranges&quot;,&quot;grapes&quot;]</span><br><span class="line">Number Array Length 5</span><br><span class="line">Fruit Array Length 3</span><br></pre></td></tr></table></figure>

<h2 id="6-泛型"><a href="#6-泛型" class="headerlink" title="6. 泛型"></a>6. 泛型</h2><p>GSON使用<code>com.google.gson.reflect.TypeToken</code>来支持泛型类型的Java类对象，用于序列化和反序列化。使用<code>TypeToken</code>类的目的是使用Java泛型类型的类型擦除的特性。</p>
<p>类型擦除发生在编译期，在这里，Java泛型类型被完全删除，以产生字节码。因此，在将JSON字符串反序列化为泛型Java类时，它可能会没有正确地反序列化。</p>
<p>下面的代码演示了泛型类型序列化/反序列化以及<code>TypeToken</code>类是用来解决这个问题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.reflect.TypeToken;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StudentGeneric</span>&lt;<span class="title">T</span>, <span class="title">E</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">	T mark;</span><br><span class="line"></span><br><span class="line">	E name;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">getMark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMark</span><span class="params">(T mark)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mark = mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> E <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(E name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericTypeFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line">		StudentGeneric&lt;Integer, String&gt; studGenericObj1 = <span class="keyword">new</span> StudentGeneric&lt;Integer, String&gt;();</span><br><span class="line">		studGenericObj1.setMark(<span class="number">25</span>);</span><br><span class="line">		studGenericObj1.setName(<span class="string">&quot;Sandeep&quot;</span>);</span><br><span class="line"></span><br><span class="line">		String json = gson.toJson(studGenericObj1);</span><br><span class="line">		System.out.println(<span class="string">&quot;Serialized Output :&quot;</span>);</span><br><span class="line">		System.out.println(json);</span><br><span class="line"></span><br><span class="line">		StudentGeneric&lt;Integer, String&gt; studGenericObj2 = gson.fromJson(json, StudentGeneric.class);</span><br><span class="line">		System.out.println(<span class="string">&quot;DeSerialized Output :&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;Mark : &quot;</span> + studGenericObj2.getMark());</span><br><span class="line"></span><br><span class="line">		Type studentGenericType = <span class="keyword">new</span> TypeToken&lt;StudentGeneric&lt;Integer, String&gt;&gt;() &#123;&#125;.getType();</span><br><span class="line">		</span><br><span class="line">		StudentGeneric&lt;Integer, String&gt; studGenericObj3 = gson.fromJson(json, studentGenericType);</span><br><span class="line">		System.out.println(<span class="string">&quot;TypeToken Use DeSerialized Output :&quot;</span>);</span><br><span class="line">		System.out.println(<span class="string">&quot;Mark : &quot;</span> + studGenericObj3.getMark());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Serialized Output :</span><br><span class="line">&#123;&quot;mark&quot;:25,&quot;name&quot;:&quot;Sandeep&quot;&#125;</span><br><span class="line">DeSerialized Output :</span><br><span class="line">Mark : 25.0</span><br><span class="line">TypeToken Use DeSerialized Output :</span><br><span class="line">Mark : 25</span><br></pre></td></tr></table></figure>

<p>在上面的代码中，<code>StudentGeneric</code>类接受两个泛型参数，并有各自的getter和setter方法。<code>StudentGeneric</code>类对象使用<code>Integer</code>和<code>String</code>作为<code>mark</code>和<code>name</code>的类型来创建的。在序列化时，<code>mark</code>被初始化为25，但反序列化输出显示为25.0，这是一个不正确的值，因为类型擦除属性在编译时从类中删除了泛型类型的参数。使用<code>TypeToken</code>类来解决这个问题。<code>getType()</code>方法返回具有泛型参数的原始类类型，它帮助GSON正确地反序列化对象，并将正确值输出为25。</p>
<h2 id="7-对-null-对象的支持"><a href="#7-对-null-对象的支持" class="headerlink" title="7. 对 null 对象的支持"></a>7. 对 null 对象的支持</h2><p>GSON也能够对<code>null</code>对象进行序列化/反序列化的JSON表示。</p>
<p>让我们看一个空对象的例子:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NullSupportFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().serializeNulls().setPrettyPrinting().create();</span><br><span class="line"></span><br><span class="line">		Student aStudent = <span class="keyword">new</span> Student();</span><br><span class="line">		aStudent.setName(<span class="string">&quot;Sandeep Kumar Patel&quot;</span>);</span><br><span class="line">		aStudent.setSubject(<span class="keyword">null</span>);</span><br><span class="line">		aStudent.setMark(<span class="number">234</span>);</span><br><span class="line"></span><br><span class="line">		String studentJson = gson.toJson(aStudent);</span><br><span class="line"></span><br><span class="line">		System.out.println(studentJson);</span><br><span class="line"></span><br><span class="line">		Student javaStudentObject = gson.fromJson(studentJson, Student.class);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;Student Subject: &quot;</span> + javaStudentObject.getSubject());</span><br><span class="line">		System.out.println(<span class="string">&quot;Student Name: &quot;</span> + javaStudentObject.getName());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Sandeep Kumar Patel&quot;,</span><br><span class="line">  &quot;subject&quot;: null,</span><br><span class="line">  &quot;mark&quot;: 234</span><br><span class="line">&#125;</span><br><span class="line">Student Subject:null</span><br><span class="line">Student Name:Sandeep Kumar Patel</span><br></pre></td></tr></table></figure>

<h2 id="8-版本支持"><a href="#8-版本支持" class="headerlink" title="8. 版本支持"></a>8. 版本支持</h2><p>GSON提供了版本化的序列化/反序列化的Java对象的JSON表示。这有助于迭代开发和发布值对象。GSON API提供了一种机制来满足这些不同版本数据的请求。</p>
<p>让我们看一个版本支持的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.Since;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Since(1.0)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String subject;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> mark;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Since(1.1)</span></span><br><span class="line">	<span class="keyword">private</span> String gender;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getGender</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> gender;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGender</span><span class="params">(String gender)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.gender = gender;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getSubject</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> subject;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSubject</span><span class="params">(String subject)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.subject = subject;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getMark</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> mark;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMark</span><span class="params">(<span class="keyword">int</span> mark)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.mark = mark;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">VersionSupportFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Student aStudent = <span class="keyword">new</span> Student();</span><br><span class="line">		aStudent.setName(<span class="string">&quot;Sandeep Kumar Patel&quot;</span>);</span><br><span class="line">		aStudent.setSubject(<span class="string">&quot;Algebra&quot;</span>);</span><br><span class="line">		aStudent.setMark(<span class="number">534</span>);</span><br><span class="line">		aStudent.setGender(<span class="string">&quot;Male&quot;</span>);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;Student json for Version 1.0 &quot;</span>);</span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().setVersion(<span class="number">1.0</span>).setPrettyPrinting().create();</span><br><span class="line">		String jsonOutput = gson.toJson(aStudent);</span><br><span class="line">		System.out.println(jsonOutput);</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">&quot;Student json for Version 1.1 &quot;</span>);</span><br><span class="line">		gson = <span class="keyword">new</span> GsonBuilder().setVersion(<span class="number">1.1</span>).setPrettyPrinting().create();</span><br><span class="line">		jsonOutput = gson.toJson(aStudent);</span><br><span class="line">		System.out.println(jsonOutput);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Student json for Version 1.0 </span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Sandeep Kumar Patel&quot;,</span><br><span class="line">  &quot;subject&quot;: &quot;Algebra&quot;,</span><br><span class="line">  &quot;mark&quot;: 534</span><br><span class="line">&#125;</span><br><span class="line">Student json for Version 1.1 </span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Sandeep Kumar Patel&quot;,</span><br><span class="line">  &quot;subject&quot;: &quot;Algebra&quot;,</span><br><span class="line">  &quot;mark&quot;: 534,</span><br><span class="line">  &quot;gender&quot;: &quot;Male&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-对无参数构造方法的支持"><a href="#9-对无参数构造方法的支持" class="headerlink" title="9. 对无参数构造方法的支持"></a>9. 对无参数构造方法的支持</h2><p>尽管Java对象进行序列化/反序列化或JSON字符串，GSON创建一个默认实例的类的构造方法。有一个默认的Java类的无参数构造方法是很好的。如果一个类没有默认构造函数，GSON提供一个<code>class.google.gson.InstanceCreator</code>接口实现来处理它。</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>详细说明</th>
</tr>
</thead>
<tbody><tr>
<td>createInstance</td>
<td>参数：java.lang.reflect.Type类的实例；返回值：<code>T</code>类型的默认对象实例，引用对象实例的类类型。</td>
</tr>
</tbody></table>
<p>让我们看一个无参构造方法的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Type;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.InstanceCreator;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> Salary salary;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Salary <span class="title">getSalary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSalary</span><span class="params">(Salary salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Employee [name=&quot;</span> + name + <span class="string">&quot;, salary=&quot;</span> + salary + <span class="string">&quot; ]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Salary</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> salaryAmount;</span><br><span class="line"></span><br><span class="line">	Salary(<span class="keyword">int</span> salary) &#123;</span><br><span class="line">		<span class="keyword">this</span>.salaryAmount = salary;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;Salary [salaryAmount=&quot;</span> + salaryAmount + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SalaryInstanceCreator</span> <span class="keyword">implements</span> <span class="title">InstanceCreator</span>&lt;<span class="title">Salary</span>&gt; </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Salary <span class="title">createInstance</span><span class="params">(Type type)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> Salary(<span class="number">25000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InstanceCreatorUse</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		String jsonString = <span class="string">&quot;&#123;\&quot;name\&quot; :\&quot;Sandeep\&quot; , \&quot;salary\&quot;: &#123;&#125;&#125;&quot;</span>;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().serializeNulls().registerTypeAdapter(Salary.class, <span class="keyword">new</span> SalaryInstanceCreator())</span><br><span class="line">				.setPrettyPrinting().create();</span><br><span class="line"></span><br><span class="line">		System.out.println(gson.fromJson(jsonString, Employee.class));</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码演示了一个JSON字符串类型的Employee类，该字符串被反序列化为<code>Employee</code>类型的对象。</p>
<ul>
<li>输入：一个 JSON 对象：<code>jsonString = &quot;&#123;\&quot;name\&quot; :\&quot;Sandeep\&quot; , \&quot;salary\&quot;: &#123;&#125;&#125;&quot;;</code></li>
<li>输出：一个 Java 对象：重写了<code> toString()</code>方法：<code>Employee [name=Sandeep, salary=Salary [salaryAmount=25000]]</code></li>
</ul>
<p>使用<code>com .google. gson.InstanceCreator</code>来实现一个<code>SalaryInstanceCreator</code>类，并重写createInstance()方法，该方法返回值25000的参数化的<code>Salary</code>构造方法。</p>
<p>这个<code>SalaryInstanceCreator</code>使用<code>registerTypeAdapter()</code>方法注册为GSON。</p>
<p>当GSON找到空的<code>Salary</code>字符串时，它将寻找类型<code>Salary</code>的默认构造方法。由于不存在默认的<code>Salary</code>构造方法，所以它寻找类型适配器的<code>GsonBuilder</code>设置，并找到<code>SalaryInstanceCreator</code>。并调用<code>createInstance()</code>方法。</p>
<p>因此，当对一个空的<code>Salary</code>类对象进行反序列化时，GSON将获得25000作为默认值。</p>
<h2 id="10-属性命名的支持"><a href="#10-属性命名的支持" class="headerlink" title="10. 属性命名的支持"></a>10. 属性命名的支持</h2><p>该特性为开发人员在序列化Java对象时提供自定义名称提供了灵活性。JSON表示变得更有意义和可读性。</p>
<p>GSON提供了一个具有内置属性命名支持的<code>FieldNamingPolicy</code>类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.FieldNamingPolicy;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.SerializedName;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">College</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@SerializedName(&quot;instituteName&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String[] coursesOffer;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String[] getCoursesOffer() &#123;</span><br><span class="line">		<span class="keyword">return</span> coursesOffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCoursesOffer</span><span class="params">(String[] coursesOffer)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.coursesOffer = coursesOffer;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldNamingFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().setFieldNamingPolicy(FieldNamingPolicy.UPPER_CAMEL_CASE).setPrettyPrinting()</span><br><span class="line">				.create();</span><br><span class="line"></span><br><span class="line">		College aCollege = <span class="keyword">new</span> College();</span><br><span class="line">		aCollege.setName(<span class="string">&quot;VIT University, Vellore&quot;</span>);</span><br><span class="line">		String[] courses = &#123; <span class="string">&quot;BTECH, MTECH, BSC, MSC&quot;</span> &#125;;</span><br><span class="line">		aCollege.setCoursesOffer(courses);</span><br><span class="line"></span><br><span class="line">		String jsonCollege = gson.toJson(aCollege);</span><br><span class="line">		System.out.println(jsonCollege);</span><br><span class="line">		College anotherCollege = gson.fromJson(jsonCollege, College.class);</span><br><span class="line">		System.out.println(<span class="string">&quot;College Name : &quot;</span> + anotherCollege.getName());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;instituteName&quot;: &quot;VIT University, Vellore&quot;,</span><br><span class="line">  &quot;CoursesOffer&quot;: [</span><br><span class="line">    &quot;BTECH, MTECH, BSC, MSC&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">College Name : VIT University, Vellore</span><br></pre></td></tr></table></figure>
<h3 id="1-用户自定义属性命名"><a href="#1-用户自定义属性命名" class="headerlink" title="(1) 用户自定义属性命名"></a>(1) 用户自定义属性命名</h3><p>除了基本的属性命名功能之外，GSON还提供了一个<code>FieldNamingStrategy</code>类，以使开发人员能够创建自己的属性命名策略。以下步骤演示如何创建自定义属性命名策略：</p>
<ul>
<li>创建一个 Java 类并实现<code>FieldNamingStrategy</code>接口</li>
<li>重写<code>translateName</code>方法</li>
<li>该方法提供了自定义属性命名策略的真正实现。GSON在处理自定义属性名称策略时，使用该方法中的逻辑作为属性名：</li>
</ul>
<table>
<thead>
<tr>
<th>方法</th>
<th>详细说明</th>
</tr>
</thead>
<tbody><tr>
<td>translateName</td>
<td>参数：<code>java.lang.reflect.Field</code>；返回：已更改的属性名字符串</td>
</tr>
</tbody></table>
<p>让我们看一个用户定义属性命名的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.FieldNamingStrategy;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">College</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> String[] coursesOffer;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String[] getCoursesOffer() &#123;</span><br><span class="line">		<span class="keyword">return</span> coursesOffer;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCoursesOffer</span><span class="params">(String[] coursesOffer)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.coursesOffer = coursesOffer;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomFieldStrategy</span> <span class="keyword">implements</span> <span class="title">FieldNamingStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">translateName</span><span class="params">(Field aField)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		String nameOfField = aField.getName();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> nameOfField.toUpperCase();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomFieldNamingFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> GsonBuilder().setFieldNamingStrategy(<span class="keyword">new</span> CustomFieldStrategy()).setPrettyPrinting().create();</span><br><span class="line"></span><br><span class="line">		College aCollege = <span class="keyword">new</span> College();</span><br><span class="line">		aCollege.setName(<span class="string">&quot;VIT University, Vellore&quot;</span>);</span><br><span class="line">		String[] courses = &#123; <span class="string">&quot;BTECH, MTECH, BSC, MSC&quot;</span> &#125;;</span><br><span class="line">		aCollege.setCoursesOffer(courses);</span><br><span class="line"></span><br><span class="line">		String jsonCollege = gson.toJson(aCollege);</span><br><span class="line">		System.out.println(jsonCollege);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;NAME&quot;: &quot;VIT University, Vellore&quot;,</span><br><span class="line">  &quot;COURSESOFFER&quot;: [</span><br><span class="line">    &quot;BTECH, MTECH, BSC, MSC&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="11-属性排除策略"><a href="#11-属性排除策略" class="headerlink" title="11.  属性排除策略"></a>11.  属性排除策略</h2><p>GSON API也支持序列化期间的属性排除。开发人员可以在序列化Java对象时排除某些属性。GSON提供了两种不同的方法来实现属性的排除：</p>
<ul>
<li>配置<code>GsonBuilder</code></li>
<li>使用注解</li>
</ul>
<p><img src="http://r2cex8oik.hn-bkt.clouddn.com/3.png"></p>
<p>前面的图形显示了GSON中两种不同的属性排除策略方法的摘要。每一种方法都有详细的解释。</p>
<h3 id="（1）配置GsonBuilder"><a href="#（1）配置GsonBuilder" class="headerlink" title="（1）配置GsonBuilder"></a>（1）配置GsonBuilder</h3><p><code>GsonBuilder</code>提供<code>excludeFieldsWithModifiers()</code>方法来排除属性序列化。该方法提供了排除所有具有指定修饰符的类属性的能力。该方法的原型特征如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public GsonBuilder excludeFieldsWithModifiers(int... modifiers)</span><br></pre></td></tr></table></figure>
<ul>
<li>输入参数：<code>...</code>符号，表示入参是<code>java.lang.reflect.Modifier</code>类型可变参数，例如<code> Modifier.STATIC</code>，<code>Modifier.PUBLIC</code> 和 <code>Modifier.PRIVATE</code>。</li>
<li>返回类型：返回一个<code>GsonBuilder</code>类型的引用对象。</li>
</ul>
<p>让我们来看一个配置<code>GsonBuilder</code>的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.reflect.Modifier;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> String gender;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String designation;</span><br><span class="line">    <span class="keyword">protected</span> String department;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="string">&quot;Abcd Employee&quot;</span>, <span class="string">&quot;MALE&quot;</span>, <span class="string">&quot;Tech Lead&quot;</span>, <span class="string">&quot;IT Services&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@SuppressWarnings(&quot;static-access&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name, String gender, String designation,</span></span></span><br><span class="line"><span class="params"><span class="function">                    String department)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.gender = gender;</span><br><span class="line">        <span class="keyword">this</span>.designation = designation;</span><br><span class="line">        <span class="keyword">this</span>.department = department;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldExclusionFeature</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line"></span><br><span class="line">        String json = gson.toJson(<span class="keyword">new</span> Employee(<span class="string">&quot;Sandeep&quot;</span>, <span class="string">&quot;Male&quot;</span>, <span class="string">&quot;Tech Lead&quot;</span>, <span class="string">&quot;IT Services&quot;</span>));</span><br><span class="line">        System.out.println(json);</span><br><span class="line"></span><br><span class="line">        Gson gson2 = <span class="keyword">new</span> GsonBuilder().excludeFieldsWithModifiers().create();</span><br><span class="line">        json = gson2.toJson(<span class="keyword">new</span> Employee(<span class="string">&quot;Sandeep&quot;</span>, <span class="string">&quot;MALE&quot;</span>, <span class="string">&quot;Tech Lead&quot;</span>, <span class="string">&quot;IT Services&quot;</span>));</span><br><span class="line">        System.out.println(json);</span><br><span class="line"></span><br><span class="line">        Gson gson3 = <span class="keyword">new</span> GsonBuilder().excludeFieldsWithModifiers(Modifier.STATIC).create();</span><br><span class="line">        json = gson3.toJson(<span class="keyword">new</span> Employee(<span class="string">&quot;Sandeep&quot;</span>, <span class="string">&quot;MALE&quot;</span>, <span class="string">&quot;Tech Lead&quot;</span>, <span class="string">&quot;IT Services&quot;</span>));</span><br><span class="line">        System.out.println(json);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;name&quot;:&quot;Sandeep&quot;,&quot;department&quot;:&quot;IT Services&quot;&#125;</span><br><span class="line">&#123;&quot;name&quot;:&quot;Sandeep&quot;,&quot;gender&quot;:&quot;MALE&quot;,&quot;designation&quot;:&quot;Tech Lead&quot;,&quot;department&quot;:&quot;IT Services&quot;&#125;</span><br><span class="line">&#123;&quot;name&quot;:&quot;Sandeep&quot;,&quot;gender&quot;:&quot;MALE&quot;,&quot;department&quot;:&quot;IT Services&quot;&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以从之前的代码中得到三个启示：</p>
<ul>
<li>输出的第一行有一个<code>Employee</code>类JSON字符串，它有两个属性：<code>name</code>和<code>department</code>。这个输出是由于Gson对象，使用默认的方法创建的。因此，在序列化时，它省略了<code>static</code>和<code>transient</code>修饰的属性。</li>
<li>输出的第二行有一个<code>Employee</code>类JSON字符串，它有四个属性：<code>name</code>、<code>gender</code>、<code>designation</code>和<code>department</code>。这个输出是由于Gson对象使用构造器的方式和<code>excludeFieldWithModifiers()</code>方法。当没有参数传递时，它会序列化<code>Employee</code>对象中存在的所有字属性类型。</li>
<li>输出的第三行有一个<code>Employee</code>类JSON字符串，该字符串包含三个属性：<code>name</code>、<code>gender</code>和<code>department</code>。输出是由于Gson对象使用构造器的方式和<code>excludeFieldsWithModifiers()</code>方法。<code>Modifier.STATIC</code>作为一个参数传递给这个方法，它不序列化<code>Employee</code>对象的任何静态属性。</li>
</ul>
<h3 id="（2）使用注解"><a href="#（2）使用注解" class="headerlink" title="（2）使用注解"></a>（2）使用注解</h3><p>GSON提供<code>@Expose</code>注解实现在序列化期间排除指定属性。属性标有<code>@Expose</code>注解的将序列化为JSON表示。GSON的<code>excludeFieldsWithoutExposeAnnotation()</code>方法必须在配置<code>GsonBuilder</code>使用<code>@Expose</code>注解时被调用。</p>
<p>让我们来看一个使用<code>@Expose</code>注解的例子：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.annotations.Expose;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vegetable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Expose</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FieldExclusionAnnotationUse</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Gson gson = <span class="keyword">new</span> GsonBuilder().excludeFieldsWithoutExposeAnnotation()</span><br><span class="line">                .create();</span><br><span class="line">        Vegetable aVegetable = <span class="keyword">new</span> Vegetable();</span><br><span class="line">        aVegetable.setName(<span class="string">&quot;Potato&quot;</span>);</span><br><span class="line">        aVegetable.setPrice(<span class="number">26</span>);</span><br><span class="line">        String jsonVegetable = gson.toJson(aVegetable);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;JSON Representation of Vegetable : &quot;</span>);</span><br><span class="line">        System.out.println(jsonVegetable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JSON Representation of Vegetable : </span><br><span class="line">&#123;&quot;price&quot;:26&#125;</span><br></pre></td></tr></table></figure>

<p>我们可以从前面的代码中得出以下几点启示：</p>
<ul>
<li>前一段代码的输出有一个带属性<code>price</code>的JSON字符串。这个输出是由于Gson对象使用构造器的方式和<code>excludeFieldsWithoutExposeAnnotation()</code>方法。</li>
<li>序列化Java对象时，它只序列化带有<code>@Expose</code>的属性。</li>
</ul>
<h3 id="（3）用户自定义属性排除注解"><a href="#（3）用户自定义属性排除注解" class="headerlink" title="（3）用户自定义属性排除注解"></a>（3）用户自定义属性排除注解</h3><p>GSON为开发人员提供了灵活性，可以创建一个自定义注解，用于排除属性和类。下面的步骤演示了如何创建自定义注解：</p>
<ol>
<li>声明一个标记Java接口。一个标记接口是简单的Java接口，没有任何属性或方法。简而言之，一个空的Java接口是一个标记接口。该接口的名称将用作自定义排除注解。</li>
<li>一个Java类来实现<code>com.google.gson.ExclusionStrategy</code>。<code>ExclusionStrategy</code>接口提供了两种方法。通过实现这个接口，Java类提供了定制排除注解的功能。当GSON在序列化或反序列化并找到一个自定义注解时，它会查看实现了<code>ExclusionStrategy</code>接口的Java类，以找出如何处理它。</li>
</ol>
<p><code>ExclusionStrategy</code>接口提供了两种方法：</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>详细说明</th>
</tr>
</thead>
<tbody><tr>
<td>shouldSkipField</td>
<td>参数：<code>FieldAttributes</code> 引用类型；返回Boolean值：true：属性将被序列化/反序列化输出的一部分；false：属性将不会被序列化/反序列化输出的一部分。</td>
</tr>
<tr>
<td>shouldSkipClass</td>
<td>参数：<code>Class</code>类的引用类型。返回Boolean值：true：类将序列化/反序列化输出的一部分；false：类将不会被序列化/反序列化输出的一部分。</td>
</tr>
</tbody></table>
<p>让我们来看一个用户定义的属性排除注解的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.ExclusionStrategy;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.FieldAttributes;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.GsonBuilder;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123; ElementType.FIELD &#125;)</span></span><br><span class="line"><span class="meta">@interface</span> MyExclude &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomExclusionStrategy</span> <span class="keyword">implements</span> <span class="title">ExclusionStrategy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Class&lt;?&gt; typeToExclude;</span><br><span class="line"></span><br><span class="line">    CustomExclusionStrategy(Class&lt;?&gt; typeToExclude) &#123;</span><br><span class="line">        <span class="keyword">this</span>.typeToExclude = typeToExclude;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldSkipClass</span><span class="params">(Class&lt;?&gt; classname)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (classname == typeToExclude);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">shouldSkipField</span><span class="params">(FieldAttributes f)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> f.getAnnotation(MyExclude.class) != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vegetable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@MyExclude</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Vegetable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPrice</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrice</span><span class="params">(<span class="keyword">int</span> price)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.price = price;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserDefinedFieldExclusion</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Gson gson = <span class="keyword">new</span> GsonBuilder().setExclusionStrategies(<span class="keyword">new</span> CustomExclusionStrategy(MyExclude.class)).create();</span><br><span class="line"></span><br><span class="line">        Vegetable aVegetable = <span class="keyword">new</span> Vegetable();</span><br><span class="line">        aVegetable.setName(<span class="string">&quot;Potato&quot;</span>);</span><br><span class="line">        aVegetable.setPrice(<span class="number">26</span>);</span><br><span class="line">        String jsonVegetable = gson.toJson(aVegetable);</span><br><span class="line"></span><br><span class="line">        System.out.println(jsonVegetable);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;name&quot;:&quot;Potato&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>上面的代码执行以下步骤：</p>
<ul>
<li>使用<code>java.lang.annotation</code>创建用户自定义注解<code>@MyExclude</code>。</li>
<li>使用带有<code>MyExclude.class</code>参数的<code>CustomExclusionStrategy</code>类实例化一个自定义排除策略。</li>
<li>使用<code>setExclusionStrategies</code>方法，<code>GsonBuilder</code>配置这个新的排除策略。</li>
<li>现在，由<code>GsonBuilder</code>创建的<code>Gson</code>对象将排除带有<code>@MyExclude</code>注解的字段。</li>
</ul>
<h2 id="12-应用GSON"><a href="#12-应用GSON" class="headerlink" title="12. 应用GSON"></a>12. 应用GSON</h2><p>在JSON格式和它相应的语言库GSON的发明之后，Java web应用程序的开发(客户端与服务器端进行通信并以JSON格式对数据进行响应)获得了大量的流行，这使得Web 2.0应用程序非常成功。</p>
<p>以下<code>StudentJsonDataServlet.java</code>展示了一个Java servlet如何返回<code>Student</code>类型的JSON数据，并在浏览器中呈现为HTML表格：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> com.google.gson.Gson;</span><br><span class="line"><span class="keyword">import</span> com.packt.myapp.data.Student;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/StudentJsonDataServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentJsonDataServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">StudentJsonDataServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></span><br><span class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">		Gson gson = <span class="keyword">new</span> Gson();</span><br><span class="line"></span><br><span class="line">		List&lt;Student&gt; listOfStudent = getStudentData();</span><br><span class="line"></span><br><span class="line">		String jsonString = gson.toJson(listOfStudent);</span><br><span class="line"></span><br><span class="line">		response.setContentType(<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line"></span><br><span class="line">		response.getWriter().write(jsonString);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Returns List of Static Student data</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> List&lt;Student&gt; <span class="title">getStudentData</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		Student s1 = <span class="keyword">new</span> Student();</span><br><span class="line">		s1.setName(<span class="string">&quot;Sandeep&quot;</span>);</span><br><span class="line">		s1.setSubject(<span class="string">&quot;Computer&quot;</span>);</span><br><span class="line">		s1.setMark(<span class="number">85</span>);</span><br><span class="line"></span><br><span class="line">		Student s2 = <span class="keyword">new</span> Student();</span><br><span class="line">		s2.setName(<span class="string">&quot;John&quot;</span>);</span><br><span class="line">		s2.setSubject(<span class="string">&quot;Science&quot;</span>);</span><br><span class="line">		s2.setMark(<span class="number">85</span>);</span><br><span class="line"></span><br><span class="line">		Student s3 = <span class="keyword">new</span> Student();</span><br><span class="line">		s3.setName(<span class="string">&quot;Ram&quot;</span>);</span><br><span class="line">		s3.setSubject(<span class="string">&quot;Computer&quot;</span>);</span><br><span class="line">		s3.setMark(<span class="number">85</span>);</span><br><span class="line"></span><br><span class="line">		List&lt;Student&gt; listOfStudent = <span class="keyword">new</span> ArrayList&lt;Student&gt;();</span><br><span class="line">		listOfStudent.add(s1);</span><br><span class="line">		listOfStudent.add(s2);</span><br><span class="line">		listOfStudent.add(s3);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">return</span> listOfStudent;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>StudentJsonDataServlet</code>将学生的详细信息作为JSON字符串返回。并向浏览器表明，数据响应是一个json类型的头文件，需要设置为<code>application/json</code>。</p>
<p>以下<code>studentstableview.html</code>是在浏览器中渲染servlet响应的文件：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Students JSON Table View<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;student-data-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    $(<span class="built_in">document</span>).ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">var</span> getStudentTableHtml, html, </span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      htmlStudent, container =$(<span class="string">&#x27;#student-data-container&#x27;</span>),</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      ajaxRequest = $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">url</span>: <span class="string">&quot;StudentJsonDataServlet&quot;</span>,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="attr">dataType</span>: <span class="string">&quot;JSON&quot;</span>,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          htmlStudent = getStudentTableHtml(data);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">          container.html(htmlStudent)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">    &#125;),</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    getStudentTableHtml = <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      html = [];</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;TABLE border=&#x27;2px&#x27; cellspacing=&#x27;2px&#x27;&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;TR&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;TH&gt;NAME&lt;/TH&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;TH&gt;SUBJECT&lt;/TH&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;TH&gt;MARK&lt;/TH&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;/TR&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      $.each(data,<span class="function"><span class="keyword">function</span>(<span class="params">index, aStudent</span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;TR&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;TD&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(aStudent.name);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;/TD&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;TD&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(aStudent.subject);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;/TD&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;TD&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(aStudent.mark);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;/TD&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">        html.push(<span class="string">&quot;&lt;/TR&gt;&quot;</span>);</span></span><br><span class="line"><span class="javascript">      &#125;);</span></span><br><span class="line"><span class="javascript">      html.push(<span class="string">&quot;&lt;/TABLE&gt;&quot;</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> html.join(<span class="string">&quot;&quot;</span>);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的代码展示了在DOM就绪事件上调用jQuery Ajax事件。servlet使用GSON API将<code>Student</code>对象的列表转换为相应的JSON表示，并将其作为响应内容发送到客户端。以下截图中的Firebug控制台显示了JSON对象中的Ajax请求和响应：</p>
<p><img src="http://r2cex8oik.hn-bkt.clouddn.com/4.png"></p>
<p>在得到响应时，jQuery调用<code>success</code>方法来处理。作为返回，成功处理程序调用<code>getStudentTableHtml()</code>方法在HTML中构建一个表格。</p>
<p>该方法使用<code>for</code>循环来迭代每个学生JSON对象来构建表格的行。下面截图显示了学生JSON响应数据构建的学生详细信息的HTML表格：</p>
<p><img src="http://r2cex8oik.hn-bkt.clouddn.com/5.png"></p>
<h1 id="三-你应该了解的帮助文档"><a href="#三-你应该了解的帮助文档" class="headerlink" title="三. 你应该了解的帮助文档"></a>三. 你应该了解的帮助文档</h1><p>如果你需要相关GSON资料文档的帮助，这里有一些网址是非常有用的：</p>
<h2 id="1-官网网址"><a href="#1-官网网址" class="headerlink" title="1. 官网网址"></a>1. 官网网址</h2><ul>
<li>主页： <a target="_blank" rel="noopener" href="http://code.google.com/p/google-gson/">http://code.google.com/p/google-gson/</a></li>
<li>手册和文档：<a target="_blank" rel="noopener" href="http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html">http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/index.html</a></li>
<li>维基百科：<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/GSON">http://en.wikipedia.org/wiki/GSON</a></li>
<li>源码：<a target="_blank" rel="noopener" href="http://code.google.com/p/google-gson/source/checkout">http://code.google.com/p/google-gson/source/checkout</a></li>
<li>设计文档：<a target="_blank" rel="noopener" href="https://sites.google.com/site/gson/gson-design-document">https://sites.google.com/site/gson/gson-design-document</a></li>
<li>反馈：<a target="_blank" rel="noopener" href="http://code.google.com/p/google-gson/feeds">http://code.google.com/p/google-gson/feeds</a></li>
</ul>
<h2 id="2-文章和教程"><a href="#2-文章和教程" class="headerlink" title="2. 文章和教程"></a>2. 文章和教程</h2><ul>
<li>谷歌提供的用户指南：<a target="_blank" rel="noopener" href="https://sites.google.com/site/gson/gson-user-guide">https://sites.google.com/site/gson/gson-user-guide</a></li>
<li>Mkyong的博客：<a target="_blank" rel="noopener" href="http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/">http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/</a></li>
</ul>
<h2 id="3-社区"><a href="#3-社区" class="headerlink" title="3. 社区"></a>3. 社区</h2><ul>
<li>官方论坛：<a target="_blank" rel="noopener" href="https://groups.google.com/forum/?fromgroups#!forum/google-gson">https://groups.google.com/forum/?fromgroups#!forum/google-gson</a></li>
<li>非官方论坛：<a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/tagged/gson">http://stackoverflow.com/questions/tagged/gson</a></li>
</ul>
<h2 id="4-博客"><a href="#4-博客" class="headerlink" title="4. 博客"></a>4. 博客</h2><ul>
<li>Java code geek博客：<a target="_blank" rel="noopener" href="http://examples.javacodegeeks.com/core-java/gson/convert-java-object-to-from-json-using-gson-example/">http://examples.javacodegeeks.com/core-java/gson/convert-java-object-to-from-json-using-gson-example/</a></li>
<li>GSON应用程序：<a target="_blank" rel="noopener" href="http://www.tutorialsavvy.com/search/label/gson">http://www.tutorialsavvy.com/search/label/gson</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2017/02/10/GSON%E9%80%9F%E5%AD%A6%E5%BF%85%E4%BC%9A/" data-id="ckvtewv7f0000dku0hlkj7b8e" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JSON/" rel="tag">JSON</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/" rel="tag">Java</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/02/27/%E3%80%8A%E6%98%8E%E6%99%BA%E8%A1%8C%E5%8A%A8%E7%9A%84%E8%89%BA%E6%9C%AF%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          《明智行动的艺术》读书笔记
        
      </div>
    </a>
  
  
    <a href="/2017/01/24/%E3%80%8A%E5%8E%86%E4%BB%A3%E7%BB%8F%E6%B5%8E%E5%8F%98%E9%9D%A9%E5%BE%97%E5%A4%B1%E3%80%8B%E8%AF%BB%E5%90%8E%E6%84%9F/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">《历代经济变革得失》读后感</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><span class="category-list-count">6</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JSON/" rel="tag">JSON</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Shell/" rel="tag">Shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%B6%E6%9E%84/" rel="tag">架构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6/" rel="tag">读书</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%98%85%E8%AF%BB/" rel="tag">阅读</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">七月 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">十一月 2012</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/05/16/%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%A0%E5%BA%94%E8%AF%A5%E5%81%9C%E6%AD%A2%E9%98%85%E8%AF%BB%E6%96%B0%E9%97%BB/">为什么你应该停止阅读新闻?</a>
          </li>
        
          <li>
            <a href="/2017/09/13/10%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F/">10种常见的软件架构模式</a>
          </li>
        
          <li>
            <a href="/2017/05/19/Java-8-Date-Time-API-%E8%AF%A6%E8%A7%A3/">Java 8 Date-Time API 详解</a>
          </li>
        
          <li>
            <a href="/2017/04/10/Java-8-Lambda-%E8%A1%A8%E8%BE%BE%E5%BC%8F/">Java 8 Lambda 表达式</a>
          </li>
        
          <li>
            <a href="/2017/02/27/%E3%80%8A%E6%98%8E%E6%99%BA%E8%A1%8C%E5%8A%A8%E7%9A%84%E8%89%BA%E6%9C%AF%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">《明智行动的艺术》读书笔记</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 公众号：书香颜 | 微信号: phideonvw<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>